<section
  class="rounded-xl border border-slate-800 bg-slate-800/80 p-4 shadow-lg shadow-slate-900/50"
>
  <header class="mb-4 flex justify-between">
    <div>
      <h2 class="text-lg font-semibold text-slate-100">Variables</h2>
    </div>
    <div class="text-right">
      <span class="text-xs text-slate-400">
        {{ variables().length }} items {{ selectedVariables().length }} selected
      </span>
      <br />
      <span class="text-xs text-red-400">
        {{ isMaxSelectedVariables() ? 'Max selected variables reached' : '' }}
      </span>
    </div>
  </header>

  <div class="grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    @for (variable of variables(); track variable.id) {
    <label
      class="flex h-full items-start justify-between gap-3 rounded-lg border border-slate-700/70 bg-slate-900/60 px-3 py-2 transition hover:border-slate-500"
    >
      <div class="flex items-center gap-3">
        <input
          [disabled]="isMaxSelectedVariables() && !variable.enabled"
          type="checkbox"
          [checked]="variable.enabled"
          (change)="toggle(variable.id)"
          class="h-4 w-4 rounded border-slate-600 bg-slate-800 text-sky-400 focus:ring-2 focus:ring-sky-500 focus:ring-offset-0"
        />
        <div>
          <p class="text-sm font-medium text-slate-100">{{ variable.name }}</p>
          <p class="text-xs text-slate-400">
            {{ variable.type }}
            @if (variable.unit) {
            <span class="text-slate-500"> â€¢ {{ variable.unit }}</span>
            }
          </p>
        </div>
      </div>
      <span class="text-sm font-semibold text-sky-300">
        {{ variable.id | plcValue : values() }}
        @if (variable.unit) {
        <span class="text-xs text-slate-400 ml-1">{{ variable.unit }}</span>
        }
      </span>
    </label>
    } @empty {
    <div
      class="rounded-lg border border-dashed border-slate-700 bg-slate-900/50 p-4 text-center text-sm text-slate-400"
    >
      No variables available
    </div>
    }
  </div>
</section>
